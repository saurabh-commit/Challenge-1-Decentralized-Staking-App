{"ast":null,"code":"import { useState, useEffect, useCallback } from 'react';\n/**\r\n * Enables you to keep track of events\r\n *\r\n * ~ Features ~\r\n  - Provide readContracts by loading contracts (see more on ContractLoader.js)\r\n  - Specify the name of the contract, in this case it is \"YourContract\"\r\n  - Specify the name of the event in the contract, in this case we keep track of \"SetPurpose\" event\r\n  - Specify the provider\r\n * @param contracts\r\n * @param contractName\r\n * @param eventName\r\n * @param provider\r\n * @param startBlock\r\n * @param args\r\n * @returns\r\n */\n\nexport const useEventListener = (contracts, contractName, eventName, provider, startBlock) => {\n  const [updates, setUpdates] = useState([]);\n  const addNewEvent = useCallback((...events) => {\n    if (events != null && events.length > 0) {\n      const last = events[events.length - 1];\n      setUpdates(value => [last, ...value]);\n    }\n  }, []);\n  useEffect(() => {\n    if (provider) {\n      // if you want to read _all_ events from your contracts, set this to the block number it is deployed\n      provider.resetEventsBlock(startBlock);\n    }\n\n    if ((contracts === null || contracts === void 0 ? void 0 : contracts[contractName]) != null) {\n      try {\n        contracts[contractName].on(eventName, addNewEvent);\n        return () => {\n          contracts[contractName].off(eventName, addNewEvent);\n        };\n      } catch (e) {\n        console.log(e);\n      }\n    }\n  }, [provider, startBlock, contracts, contractName, eventName, addNewEvent]);\n  return updates;\n};","map":{"version":3,"sources":["/Users/saurabhshukl@juniper.net/Documents/Consensys/scaffold-eth/challenge-1-decentralized-staking/node_modules/eth-hooks/events/useEventListener.js"],"names":["useState","useEffect","useCallback","useEventListener","contracts","contractName","eventName","provider","startBlock","updates","setUpdates","addNewEvent","events","length","last","value","resetEventsBlock","on","off","e","console","log"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,SAAnB,EAA8BC,WAA9B,QAAiD,OAAjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAMC,gBAAgB,GAAG,CAACC,SAAD,EAAYC,YAAZ,EAA0BC,SAA1B,EAAqCC,QAArC,EAA+CC,UAA/C,KAA8D;AAC1F,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBV,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAMW,WAAW,GAAGT,WAAW,CAAC,CAAC,GAAGU,MAAJ,KAAe;AAC3C,QAAIA,MAAM,IAAI,IAAV,IAAkBA,MAAM,CAACC,MAAP,GAAgB,CAAtC,EAAyC;AACrC,YAAMC,IAAI,GAAGF,MAAM,CAACA,MAAM,CAACC,MAAP,GAAgB,CAAjB,CAAnB;AACAH,MAAAA,UAAU,CAAEK,KAAD,IAAW,CAACD,IAAD,EAAO,GAAGC,KAAV,CAAZ,CAAV;AACH;AACJ,GAL8B,EAK5B,EAL4B,CAA/B;AAMAd,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIM,QAAJ,EAAc;AACV;AACAA,MAAAA,QAAQ,CAACS,gBAAT,CAA0BR,UAA1B;AACH;;AACD,QAAI,CAACJ,SAAS,KAAK,IAAd,IAAsBA,SAAS,KAAK,KAAK,CAAzC,GAA6C,KAAK,CAAlD,GAAsDA,SAAS,CAACC,YAAD,CAAhE,KAAmF,IAAvF,EAA6F;AACzF,UAAI;AACAD,QAAAA,SAAS,CAACC,YAAD,CAAT,CAAwBY,EAAxB,CAA2BX,SAA3B,EAAsCK,WAAtC;AACA,eAAO,MAAM;AACTP,UAAAA,SAAS,CAACC,YAAD,CAAT,CAAwBa,GAAxB,CAA4BZ,SAA5B,EAAuCK,WAAvC;AACH,SAFD;AAGH,OALD,CAMA,OAAOQ,CAAP,EAAU;AACNC,QAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACH;AACJ;AACJ,GAhBQ,EAgBN,CAACZ,QAAD,EAAWC,UAAX,EAAuBJ,SAAvB,EAAkCC,YAAlC,EAAgDC,SAAhD,EAA2DK,WAA3D,CAhBM,CAAT;AAiBA,SAAOF,OAAP;AACH,CA1BM","sourcesContent":["import { useState, useEffect, useCallback } from 'react';\r\n/**\r\n * Enables you to keep track of events\r\n *\r\n * ~ Features ~\r\n  - Provide readContracts by loading contracts (see more on ContractLoader.js)\r\n  - Specify the name of the contract, in this case it is \"YourContract\"\r\n  - Specify the name of the event in the contract, in this case we keep track of \"SetPurpose\" event\r\n  - Specify the provider\r\n * @param contracts\r\n * @param contractName\r\n * @param eventName\r\n * @param provider\r\n * @param startBlock\r\n * @param args\r\n * @returns\r\n */\r\nexport const useEventListener = (contracts, contractName, eventName, provider, startBlock) => {\r\n    const [updates, setUpdates] = useState([]);\r\n    const addNewEvent = useCallback((...events) => {\r\n        if (events != null && events.length > 0) {\r\n            const last = events[events.length - 1];\r\n            setUpdates((value) => [last, ...value]);\r\n        }\r\n    }, []);\r\n    useEffect(() => {\r\n        if (provider) {\r\n            // if you want to read _all_ events from your contracts, set this to the block number it is deployed\r\n            provider.resetEventsBlock(startBlock);\r\n        }\r\n        if ((contracts === null || contracts === void 0 ? void 0 : contracts[contractName]) != null) {\r\n            try {\r\n                contracts[contractName].on(eventName, addNewEvent);\r\n                return () => {\r\n                    contracts[contractName].off(eventName, addNewEvent);\r\n                };\r\n            }\r\n            catch (e) {\r\n                console.log(e);\r\n            }\r\n        }\r\n    }, [provider, startBlock, contracts, contractName, eventName, addNewEvent]);\r\n    return updates;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}